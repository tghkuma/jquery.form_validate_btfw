(function(d,b,a,e){var c="formValidate";d.fn[c]=function(k){var i,g={init:function(l){i=d.extend({},d.fn[c].defaults,l);return this.each(function(){var m=d(this);m.data(c+".settings",i);var n=["submit"];d.each(n,function(){var o=i[this];if(typeof o==="string"){m.on(this+"."+c,function(){return m[c](o)})}else{if(d.isFunction(o)){m.on(this+"."+c,o)}}})})},destroy:function(){return this.each(function(){var l=d(this);var m=["submit"];d.each(m,function(){l.off(this+"."+c)})})},dispError:function(l){i=d(this).data(c+".settings");var m=this;d.each(l,function(o,n){g.setError.apply(m,[n.name,n.message])});if(0<l.length&&i.focusError){g.focusError.apply(this,[l[0].name])}},focusError:function(l){i=d(this).data(c+".settings");var n=d(this).find("*[name='"+l+"']");d(n).focus();var m=d(n).offset().top-d(b).innerHeight()/2;if(m<0){m=0}d("html,body").animate({scrollTop:m},i.focusErrorSpeed)},clearError:function(l){i=d(this).data(c+".settings");if(d.isFunction(i.clearError)){i.clearError.apply(this,[l])}else{if(i.errorType==="tb2"){g.clearErrorTb2.apply(this,[l])}else{g.clearErrorBootstrap.apply(this,[l])}}return this},setError:function(l,m){i=d(this).data(c+".settings");if(d.isFunction(i.setError)){i.setError.apply(this,[l,m])}else{if(i.errorType==="tb2"){g.setErrorTb2.apply(this,[l,m])}else{g.setErrorBootstrap.apply(this,[l,m])}}return this},clearErrorBootstrap:function(l){if(l){var m=d(this).find("*[name='"+l+"']");d(m).closest(".form-group").removeClass("has-error").find(".error_message").remove()}else{d(this).find(".form-group").removeClass("has-error").find(".error_message").remove()}return this},setErrorBootstrap:function(m,o){var p=d(this).find("*[name='"+m+"']");var n='<span class="help-block error_message">'+o+"</span>";d(p).closest(".form-group").addClass("has-error");if(p.attr("type")!=="radio"&&p.attr("type")!=="checkbox"){var l=d(p).closest(".input-group");if(d(l).length!==0){d(l).after(n)}else{d(p).filter(":last").after(n)}}else{d(p).filter(":last").parent().after(n)}return this},clearErrorTb2:function(l){if(l){var m=d(this).find("*[name='"+l+"']");d(m).closest(".control-group").removeClass("error").find(".error_message").remove()}else{d(this).find(".control-group").removeClass("error").find(".error_message").remove()}return this},setErrorTb2:function(l,m){var n=d(this).find("*[name='"+l+"']");d(n).closest(".control-group").addClass("error");d(n).closest(".controls").append('<div class="help-block error_message">'+m+"</div>");return this},validate:function(n){i=d.extend(d(this).data(c+".settings"),n);g.clearError.apply(this);var m=true;var l=g.getValidateResult.apply(this,[i]);if(0<l.length){g.dispError.apply(this,[l]);m=false}if(d.isFunction(i.result)){m=i.result.apply(this,[m,l])}return m},validate_alert:function(n){i=d.extend(d(this).data(c+".settings"),n);var m=true;var l=g.getValidateResult.apply(this,[i]);if(0<l.length){alert(messages.VALIDATE_ERROR+"\n"+j.join(l));if(i.focusError){g.focusError.apply(this,[l[0].name])}m=false}if(d.isFunction(i.result)){m=i.result.apply(this,[m,l])}return m},getValidateResult:function(n){var o=this;i=d.extend(d(this).data(c+".settings"),n);var m=[];var l=i.fields;if(!d.isArray(l)){return m}d.each(l,function(r,t){if(!t.rules){return true}var p=t.rules;if(!d.isArray(p)){p=[p]}var q=d(o).find("*[name='"+t.name+"']");var s=j.existsValue(q);d.each(p,function(v,x){var u=[];var z;var y;if(d.isArray(x)){if(!x[0]){return}if(x[1]){y=x[1];if(!d.isArray(y)){y=[y]}}x=x[0]}else{if(typeof x==="object"){if(!x.rule){return}if(x.params){y=x.params;if(!d.isArray(y)){y=[y]}}x=x.rule}else{if(typeof x==="string"){y=x.split(":",2);if(y[0]){x=y[0]}if(y[1]){try{y=JSON.parse(y[1])}catch(w){y=y[1].split(",")}if(!d.isArray(y)){y=[y]}}else{y=[]}}}}if(d.isFunction(x)){z=x.apply(o,[t,q,y,i]);j.pushErrors(u,t,z)}else{if(typeof x==="string"){if(s){if(f[x]){z=f[x].apply(o,[t,q,y,i]);j.pushErrors(u,t,z)}else{}}else{if(x==="required"){j.pushErrors(u,t,i.messages.REQUIRED)}else{if(h[x]){z=h[x].apply(o,[t,q,y,i]);j.pushErrors(u,t,z)}else{}}}}}if(u&&0<u.length){m=m.concat(u)}});return true});return m}};var h={zip_ex:function(o,m,p,n){var l=d(this).find("*[name='"+o.name+n.zip_suffix+"']");if(m&&j.getValue(m)&&(!l||!l.val())){return n.messages.INSUFFICIENT}return null},ymd:function(x,m,p,o){var n=[];var v=null,u=null,w=null;var s=false,y=false,q=false;var t=d(this).find("*[name='"+x.name+o.ymd_suffix_y+"']");var l=d(this).find("*[name='"+x.name+o.ymd_suffix_m+"']");var r=d(this).find("*[name='"+x.name+o.ymd_suffix_d+"']");if(t&&t.val()!==""){s=true;v=t.val()}if(l&&l.val()!==""){y=true;u=l.val()}if(r&&r.val()!==""){q=true;w=r.val()}if(p[0]==="required"){if(!s){n.push(j.format(o.messages.REQUIRED_PART,o.messages.DATE_PART_Y))}if(!y){n.push(j.format(o.messages.REQUIRED_PART,o.messages.DATE_PART_M))}if(!q){n.push(j.format(o.messages.REQUIRED_PART,o.messages.DATE_PART_D))}}else{if((s||y||q)&&!(s&&y&&q)){if(!s){n.push(j.format(o.messages.INSUFFICIENT_PART,o.messages.DATE_PART_Y))}if(!y){n.push(j.format(o.messages.INSUFFICIENT_PART,o.messages.DATE_PART_M))}if(!q){n.push(j.format(o.messages.INSUFFICIENT_PART,o.messages.DATE_PART_D))}}}if(!j._isInteger(v)){n.push(j.format(o.messages.INTEGER_PART,o.messages.DATE_PART_Y))}if(!j._isInteger(u)){n.push(j.format(o.messages.INTEGER_PART,o.messages.DATE_PART_M))}if(!j._isInteger(w)){n.push(j.format(o.messages.INTEGER_PART,o.messages.DATE_PART_D))}if(n.length===0&&!j._isDate(v,u,w)){n.push(j.format(o.messages.DATE_INVALID))}return n}};var f={confirm:function(o,l,p,n){var m=d(this).find("*[name='"+o.name+n.confirm_suffix+"']");if(!l||!m||j.getValue(l)!==m.val()){return j.format(n.messages.CONFIRM,(o.d_name?o.d_name:n.messages.CONFIRM_FIELD))}return null},email:function(n,l){var o=j.getValue(l);if(o){var m=j._isEmailEx(o);if(m!==""){return m}}return null},zenkaku:function(m,l){if(!j._isZenkaku(j.getValue(l))){return i.messages.ZENKAKU}return null},hankaku:function(m,l){if(!j._isHankaku(j.getValue(l))){return i.messages.HANKAKU}return null},zen_katakana:function(m,l){if(!j._isAllkana(j.getValue(l))){return i.messages.ZEN_KANA}return null},hiragana:function(m,l){if(!j._isAllHiragana(j.getValue(l))){return i.messages.HIRAGANA}return null},tel:function(m,l){if(!j._isTel(j.getValue(l))){return i.messages.TEL}return null},minlength:function(n,l,o){var m=Number(o[0]);if(j.getValue(l).length<m){return j.format(i.messages.MIN_LENGTH,m)}return null},maxlength:function(n,m,o){var l=Number(o[0]);if(l<j.getValue(m).length){return j.format(i.messages.MAX_LENGTH,l)}return null},numeric:function(m,l){var n=j.getValue(l);if(!d.isNumeric(n)||(n.indexOf(" ")!==-1)){return i.messages.NUMERICAL_VALUE}return null},number:function(m,l){return this.numeric(m,l)},numlength:function(o,m,q){var p=j.getValue(m);var r=q[0];var l=q[0];if(q[1]){r+=","+q[1];l+="～"+q[1]}var n=new RegExp("^\\d{"+r+"}$");if(!n.test(p)){return j.format(i.messages.NUM_LENGTH,l)}return null},min:function(n,l,p){var o=j.getValue(l);if(!j._isInteger(o)){return i.messages.INTEGER}var m=Number(p[0]);if(o<m){return j.format(i.messages.MIN,m)}return null},max:function(n,m,p){var o=j.getValue(m);if(!j._isInteger(o)){return i.messages.INTEGER}var l=Number(p[0]);if(l<o){return j.format(i.messages.MIN,l)}return null},range:function(o,m,q){var p=j.getValue(m);if(!j._isInteger(p)){return i.messages.INTEGER}var n=Number(q[0]);var l=Number(q[1]);if(p<n||l<p){return j.format(i.messages.RANGE,n,l)}return null},date:function(n,l){var o=j.getValue(l);var m=new RegExp("^((\\d{1,4})[/-](\\d{1,2})[/-](\\d{1,2}))$","g");if(!o.match(m)){return i.messages.DATE}if(!j._isDate(RegExp.$2,RegExp.$3,RegExp.$4)){return i.messages.DATE_INVALID}return null},datetime:function(n,l){var o=j.getValue(l);var m=new RegExp("^((\\d{1,4})[/-](\\d{1,2})[/-](\\d{1,2}))( ((\\d{1,2}):(\\d{1,2})(:(\\d{1,2}))?))?$","g");if(!o.match(m)){return i.messages.DATETIME}if(!j._isDate(RegExp.$2,RegExp.$3,RegExp.$4)){return i.messages.DATE_INVALID}if(RegExp.$6&&!j._isTime(RegExp.$7,RegExp.$8,RegExp.$10)){return i.messages.TIME_INVALID}return null},date_ex:function(p,n){var r=j.getValue(n);var o=new RegExp("^(\\d{1,4})([/-](\\d{1,2})([/-](\\d{1,2}))?)?$");if(!r.match(o)){return i.messages.DATE_EX}var s=RegExp.$1;var l=RegExp.$3?RegExp.$3:1;var q=RegExp.$5?RegExp.$5:1;if(!j._isDate(s,l,q)){return i.messages.DATE_INVALID}return null},time:function(n,l,p){var o=j.getValue(l);var m;if(p[0]==="hm"){m=new RegExp("^(\\d{1,2}):(\\d{1,2})$","g");if(!o.match(m)){return i.messages.TIME_HM}if(!j._isTime(RegExp.$1,RegExp.$2,0)){return i.messages.TIME_INVALID}}else{m=new RegExp("^(\\d{1,2}):(\\d{1,2}):(\\d{1,2})$","g");if(!o.match(m)){return i.messages.TIME}if(!j._isTime(RegExp.$1,RegExp.$2,RegExp.$3)){return i.messages.TIME_INVALID}}return null},zip:function(n,l){var o=j.getValue(l);var m=new RegExp("^\\d{1,3}-\\d{1,4}$","g");if(!o.match(m)){return i.messages.ZIP}return null},checkbox:function(p,n,q){var m=n.filter(":checked").length,o=Number(q[0]),l;if(2<=q.length){l=Number(q[1]);if(m<o||l<m){return j.format(i.messages.CHECKBOX_RANGE,o,l)}}else{if(m<o){return j.format(i.messages.CHECKBOX_MIN,o)}}},regexp:function(p,l,r){var q=j.getValue(l),n,m;if(!d.isArray(r)){r=[r]}try{if(typeof r[0]==="string"){n=new RegExp(r[0],r[1]?r[1]:e);m=r[2]}else{n=r[0];m=r[1]}if(!n.test(q)){return(m?m:i.messages.REGEXP_INVALID_VALUE)}}catch(o){return i.messages.REGEXP_INVALID_PARAM}return null}};var j={existsValue:function(l){var m;if(!l){m=false}else{if(l.attr("type")==="checkbox"){m=(0<l.filter(":checked").length)}else{m=!!j.getValue(l)}}return m},getValue:function(l){var m=l.attr("type"),n;if(m==="radio"){n=l.filter(":checked").val()}else{if(m!=="checkbox"){n=l.val()}else{n=[];l.filter(":checked").each(function(){n.push(d(this).val())})}}return n},pushErrors:function(l,m,n){if(typeof n==="string"&&n){l.push({name:m.name,d_name:m.d_name,message:n})}else{if(d.isArray(n)){d.each(n,function(p,o){l.push({name:m.name,d_name:m.d_name,message:o})})}}return l},_isHankaku:function(l){return !(/[^\x20-\x7E]/).test(l)},_isZenkaku:function(l){return !(/[\w\-\.]/).test(l)},_isTel:function(l){return !(/[^0-9\-\(\)]/).test(l)},_isInteger:function(l){var m=/^(-\d+|\d*)$/.test(""+l);return m&&!isNaN(l)},_isDate:function(n,m,l){if(n<1900||9999<n){return false}if(m<1||12<m){return false}if(l<1){return false}var o=[31,28,31,30,31,30,31,31,30,31,30,31];if((n%4===0&&n%100!==0)||n%400===0){o[1]=29}return !(o[m-1]<l)},_isTime:function(n,l,m){if(n<0||24<=n){return false}if(l<0||60<=l){return false}return !(m!==null&&(m<0||60<=m))},_isAllkana:function(m){for(var l=0;l<m.length;l++){if(m.charAt(l)<"ァ"||m.charAt(l)>"ヶ"){if(m.charAt(l)!=="ー"&&m.charAt(l)!==" "&&m.charAt(l)!=="　"){return false}}}return true},_isAllHiragana:function(m){for(var l=0;l<m.length;l++){if(m.charAt(l)<"ぁ"||m.charAt(l)>"ん"){if(m.charAt(l)!=="ー"&&m.charAt(l)!==" "&&m.charAt(l)!=="　"){return false}}}return true},_isEmailEx:function(x){var n=/^(.+)@(.+)$/,p='\\(\\)<>@,;:\\\\\\"\\.\\[\\]',m="[^\\s"+p+"]",y=/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/,v=m+"+",l=new RegExp("^"+v+"(\\."+v+")*$"),z=x.match(n);if(z===null){return i.messages.MAIL_NO_AT}var r=z[2];var u=r.match(y);if(u!==null){for(var s=1;s<=4;s++){if(u[s]>255){return i.messages.MAIL_INVALID_IP}}}var q=r.match(l);if(q===null){return i.messages.MAIL_NO_DOMAIN}var w=new RegExp(v,"g"),o=r.match(w),t=o.length;if(o[o.length-1].length<2||4<o[o.length-1].length){return i.messages.MAIL_INVALID_LOCALE}if(t<2){return i.messages.MAIL_INVALID_DMAIN}return""},format:function(){var l=Array.prototype.slice.call(arguments,0);var m=l.shift();d.each(l,function(n,o){m=m.replace(new RegExp("\\{"+n+"}","g"),o)});return m},join:function(m,n){if(n===e){n="\n"}var l=[];d.each(m,function(p,o){if(typeof o==="string"&&o){l.push(o)}else{l.push((o.d_name?o.d_name:o.name)+" : "+o.message)}});return l.join(n)}};if(g[k]){return g[k].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof k==="object"||!k){return g.init.apply(this,arguments)}else{d.error('Method "'+k+'" does not exist in '+c+" plugin!")}}};d.fn[c].defaults={result:null,submit:"validate",confirm_suffix:"_confirm",zip_suffix:"_after",ymd_suffix_y:"_y",ymd_suffix_m:"_m",ymd_suffix_d:"_d",fields:null,errorType:null,clearError:null,setError:null,focusError:true,focusErrorSpeed:"fast",messages:{VALIDATE_ERROR:"入力に誤りがあります.",REQUIRED:"必須項目です.",REQUIRED_PART:"{0} は必須項目です.",INSUFFICIENT:"不足しています.",INSUFFICIENT_PART:"{0} が不足しています.",CONFIRM:"確認{0}と異なっています.",CONFIRM_FIELD:"項目",NUMERICAL_VALUE:"数字を入力して下さい.",INTEGER:"整数値を入力して下さい.",INTEGER_PART:"{0} は整数値を入力して下さい.",MIN:"{0} ～ の数字を入力してください.",MAX:"～ {0} の数字を入力してください.",RANGE:"{0} ～ {1} の数字を入力してください.",MIN_LENGTH:"{0}文字以上で入力して下さい.",MAX_LENGTH:"{0}文字以下で入力して下さい.",NUM_LENGTH:"{0}桁の数字を入力してください.",CHECKBOX_MIN:"{0} 個チェックしてください.",CHECKBOX_RANGE:"{0}～{1} 個の間でチェックしてください.",ZENKAKU:"全角で入力してください.",HANKAKU:"半角で入力してください.",ZEN_KANA:"全角カタカナで入力してください.",TEL:"数字-()で入力してください.",ZIP:"[nnn-nnnn]書式で記述してください.",DATE:"[YYYY/MM/DD]書式で記述してください.",DATE_EX:"[YYYY/MM/DD] or [YYYY/MM] or [YYYY]書式で記述してください.",DATETIME:"[YYYY/MM/DD hh:mm:ss]書式で記述してください.",TIME:"[hh:mm:ss]書式で記述してください.",TIME_HM:"[hh:mm:ss]書式で記述してください.",DATE_INVALID:"日付が間違っています.",TIME_INVALID:"時間が間違っています.",DATE_PART_Y:"(年)",DATE_PART_M:"(月)",DATE_PART_D:"(日)",REGEXP_INVALID_PARAM:"正規表現が間違っています.",REGEXP_INVALID_VALUE:"書式が間違っています.",MAIL_NO_AT:"正しくありません(@).",MAIL_INVALID_IP:"正しくありません(IP).",MAIL_NO_DOMAIN:"ドメイン名がありません(DOMAIN).",MAIL_INVALID_LOCALE:"正しくありません(LOCALE).",MAIL_INVALID_DMAIN:"ドメイン名の書式が誤っています."}}})(jQuery,window,document);