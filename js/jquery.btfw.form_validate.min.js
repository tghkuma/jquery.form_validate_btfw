(function(d,b,a,f){var c="formValidate",e=c+".settings";d.fn[c]=function(l){var j,h={init:function(m){j=d.extend({},d.fn[c].defaults,m);return this.each(function(){var n=d(this);n.data(e,j);var o=["submit"];d.each(o,function(){var p=j[this];if(typeof p==="string"){n.on(this+"."+c,function(){return n[c](p)})}else{if(d.isFunction(p)){n.on(this+"."+c,p)}}})})},destroy:function(){return this.each(function(){var m=d(this);var n=["submit"];d.each(n,function(){m.off(this+"."+c)})})},dispError:function(m){j=d(this).data(e);var n=this;d.each(m,function(p,o){h.setError.apply(n,[o.name,o.message])});if(0<m.length&&j.focusError){h.focusError.apply(this,[m[0].name])}},focusError:function(m){j=d(this).data(e);var o=d(this).find("*[name='"+m+"']");d(o).focus();var n=d(o).offset().top-d(b).innerHeight()/2;if(n<0){n=0}d("html,body").animate({scrollTop:n},j.focusErrorSpeed)},clearError:function(m){j=d(this).data(e);if(d.isFunction(j.clearError)){j.clearError.apply(this,[m])}else{if(j.errorType==="tb2"){h.clearErrorTb2.apply(this,[m])}else{h.clearErrorBootstrap.apply(this,[m])}}return this},setError:function(m,n){j=d(this).data(e);if(d.isFunction(j.setError)){j.setError.apply(this,[m,n])}else{if(j.errorType==="tb2"){h.setErrorTb2.apply(this,[m,n])}else{h.setErrorBootstrap.apply(this,[m,n])}}return this},clearErrorBootstrap:function(m){if(m){var n=d(this).find("*[name='"+m+"']");d(n).closest(".form-group").removeClass("has-error").find(".error_message").remove()}else{d(this).find(".form-group").removeClass("has-error").find(".error_message").remove()}return this},setErrorBootstrap:function(n,p){var q=d(this).find("*[name='"+n+"']");var o='<span class="help-block error_message">'+p+"</span>";d(q).closest(".form-group").addClass("has-error");if(q.attr("type")!=="radio"&&q.attr("type")!=="checkbox"){var m=d(q).closest(".input-group");if(d(m).length!==0){d(m).after(o)}else{d(q).filter(":last").after(o)}}else{d(q).filter(":last").parent().after(o)}return this},clearErrorTb2:function(m){if(m){var n=d(this).find("*[name='"+m+"']");d(n).closest(".control-group").removeClass("error").find(".error_message").remove()}else{d(this).find(".control-group").removeClass("error").find(".error_message").remove()}return this},setErrorTb2:function(m,n){var o=d(this).find("*[name='"+m+"']");d(o).closest(".control-group").addClass("error");d(o).closest(".controls").append('<div class="help-block error_message">'+n+"</div>");return this},validate:function(o){j=d.extend(d(this).data(e),o);h.clearError.apply(this);var n=true;var m=h.getValidateResult.apply(this,[j]);if(0<m.length){h.dispError.apply(this,[m]);n=false}if(d.isFunction(j.result)){n=j.result.apply(this,[n,m])}return n},validate_alert:function(o){j=d.extend(d(this).data(e),o);var n=true;var m=h.getValidateResult.apply(this,[j]);if(0<m.length){alert(j.messages.VALIDATE_ERROR+"\n"+k.join(m));if(j.focusError){h.focusError.apply(this,[m[0].name])}n=false}if(d.isFunction(j.result)){n=j.result.apply(this,[n,m])}return n},getValidateResult:function(o){var p=this;j=d.extend(d(this).data(e),o);var n=[];var m=j.fields;if(!d.isArray(m)){return n}d.each(m,function(s,u){if(!u.rules){return true}var q=u.rules;if(!d.isArray(q)){q=[q]}var r=d(p).find("*[name='"+u.name+"']");var t=k.existsValue(r);d.each(q,function(w,y){var v=[];var A;var z;if(d.isArray(y)){if(!y[0]){return}if(y[1]){z=y[1];if(!d.isArray(z)){z=[z]}}y=y[0]}else{if(typeof y==="object"){if(!y.rule){return}if(y.params){z=y.params;if(!d.isArray(z)){z=[z]}}y=y.rule}else{if(typeof y==="string"){z=y.split(":",2);if(z[0]){y=z[0]}if(z[1]){try{z=JSON.parse(z[1])}catch(x){z=z[1].split(",")}if(!d.isArray(z)){z=[z]}}else{z=[]}}}}if(d.isFunction(y)){A=y.apply(p,[u,r,z,j]);k.pushErrors(v,u,A)}else{if(typeof y==="string"){if(t){if(g[y]){A=g[y].apply(p,[u,r,z,j]);k.pushErrors(v,u,A)}else{}}else{if(y==="required"){k.pushErrors(v,u,j.messages.REQUIRED)}else{if(i[y]){A=i[y].apply(p,[u,r,z,j]);k.pushErrors(v,u,A)}else{}}}}}if(v&&0<v.length){n=n.concat(v)}});return true});return n}};var i={zip_ex:function(p,n,q,o){var m=d(this).find("*[name='"+p.name+o.zip_suffix+"']");if(n&&k.getValue(n)&&(!m||!m.val())){return o.messages.INSUFFICIENT}return null},ymd:function(x,n,p){var o=[];var v=null,u=null,w=null;var s=false,y=false,q=false;var t=d(this).find("*[name='"+x.name+j.ymd_suffix_y+"']");var m=d(this).find("*[name='"+x.name+j.ymd_suffix_m+"']");var r=d(this).find("*[name='"+x.name+j.ymd_suffix_d+"']");if(t&&t.val()!==""){s=true;v=t.val()}if(m&&m.val()!==""){y=true;u=m.val()}if(r&&r.val()!==""){q=true;w=r.val()}if(p[0]==="required"){if(!s){o.push(k.format(j.messages.REQUIRED_PART,j.messages.DATE_PART_Y))}if(!y){o.push(k.format(j.messages.REQUIRED_PART,j.messages.DATE_PART_M))}if(!q){o.push(k.format(j.messages.REQUIRED_PART,j.messages.DATE_PART_D))}}else{if((s||y||q)&&!(s&&y&&q)){if(!s){o.push(k.format(j.messages.INSUFFICIENT_PART,j.messages.DATE_PART_Y))}if(!y){o.push(k.format(j.messages.INSUFFICIENT_PART,j.messages.DATE_PART_M))}if(!q){o.push(k.format(j.messages.INSUFFICIENT_PART,j.messages.DATE_PART_D))}}}if(!k._isInteger(v)){o.push(k.format(j.messages.INTEGER_PART,j.messages.DATE_PART_Y))}if(!k._isInteger(u)){o.push(k.format(j.messages.INTEGER_PART,j.messages.DATE_PART_M))}if(!k._isInteger(w)){o.push(k.format(j.messages.INTEGER_PART,j.messages.DATE_PART_D))}if(o.length===0&&!k._isDate(v,u,w)){o.push(k.format(j.messages.DATE_INVALID))}return o}};var g={confirm:function(o,m,p){var n=d(this).find("*[name='"+o.name+j.confirm_suffix+"']");if(!m||!n||k.getValue(m)!==n.val()){return k.format(j.messages.CONFIRM,(o.d_name?o.d_name:j.messages.CONFIRM_FIELD))}return null},email:function(o,m){var p=k.getValue(m);if(p){var n=k._isEmailEx(p);if(n!==""){return n}}return null},zenkaku:function(n,m){if(!k._isZenkaku(k.getValue(m))){return j.messages.ZENKAKU}return null},hankaku:function(n,m){if(!k._isHankaku(k.getValue(m))){return j.messages.HANKAKU}return null},zen_katakana:function(n,m){if(!k._isAllkana(k.getValue(m))){return j.messages.ZEN_KANA}return null},hiragana:function(n,m){if(!k._isAllHiragana(k.getValue(m))){return j.messages.HIRAGANA}return null},tel:function(n,m){if(!k._isTel(k.getValue(m))){return j.messages.TEL}return null},minlength:function(o,m,p){var n=Number(p[0]);if(k.getValue(m).length<n){return k.format(j.messages.MIN_LENGTH,n)}return null},maxlength:function(o,n,p){var m=Number(p[0]);if(m<k.getValue(n).length){return k.format(j.messages.MAX_LENGTH,m)}return null},numeric:function(n,m){var o=k.getValue(m);if(!d.isNumeric(o)||(o.indexOf(" ")!==-1)){return j.messages.NUMERICAL_VALUE}return null},number:function(n,m){return g.numeric.apply(this,[n,m])},numlength:function(p,n,r){var q=k.getValue(n),s=r[0],m=r[0];if(r[1]){s+=","+r[1];m+="～"+r[1]}var o=new RegExp("^\\d{"+s+"}$");if(!o.test(q)){return k.format(j.messages.NUM_LENGTH,m)}return null},min:function(o,m,q){var p=k.getValue(m);if(!k._isInteger(p)){return j.messages.INTEGER}var n=Number(q[0]);if(p<n){return k.format(j.messages.MIN,n)}return null},max:function(o,n,q){var p=k.getValue(n);if(!k._isInteger(p)){return j.messages.INTEGER}var m=Number(q[0]);if(m<p){return k.format(j.messages.MIN,m)}return null},range:function(p,n,r){var q=k.getValue(n);if(!k._isInteger(q)){return j.messages.INTEGER}var o=Number(r[0]),m=Number(r[1]);if(q<o||m<q){return k.format(j.messages.RANGE,o,m)}return null},date:function(o,m){var p=k.getValue(m),n=new RegExp("^((\\d{1,4})[/-](\\d{1,2})[/-](\\d{1,2}))$","g");if(!p.match(n)){return j.messages.DATE}if(!k._isDate(RegExp.$2,RegExp.$3,RegExp.$4)){return j.messages.DATE_INVALID}return null},datetime:function(o,m){var p=k.getValue(m),n=new RegExp("^((\\d{1,4})[/-](\\d{1,2})[/-](\\d{1,2}))( ((\\d{1,2}):(\\d{1,2})(:(\\d{1,2}))?))?$","g");if(!p.match(n)){return j.messages.DATETIME}if(!k._isDate(RegExp.$2,RegExp.$3,RegExp.$4)){return j.messages.DATE_INVALID}if(RegExp.$6&&!k._isTime(RegExp.$7,RegExp.$8,RegExp.$10)){return j.messages.TIME_INVALID}return null},date_ex:function(q,o){var s=k.getValue(o),p=new RegExp("^(\\d{1,4})([/-](\\d{1,2})([/-](\\d{1,2}))?)?$");if(!s.match(p)){return j.messages.DATE_EX}var t=RegExp.$1,n=RegExp.$3?RegExp.$3:1,r=RegExp.$5?RegExp.$5:1;if(!k._isDate(t,n,r)){return j.messages.DATE_INVALID}return null},time:function(o,m,q){var p=k.getValue(m),n;if(q[0]==="hm"){n=new RegExp("^(\\d{1,2}):(\\d{1,2})$","g");if(!p.match(n)){return j.messages.TIME_HM}if(!k._isTime(RegExp.$1,RegExp.$2,0)){return j.messages.TIME_INVALID}}else{n=new RegExp("^(\\d{1,2}):(\\d{1,2}):(\\d{1,2})$","g");if(!p.match(n)){return j.messages.TIME}if(!k._isTime(RegExp.$1,RegExp.$2,RegExp.$3)){return j.messages.TIME_INVALID}}return null},zip:function(o,m){var p=k.getValue(m),n=new RegExp("^\\d{1,3}-\\d{1,4}$","g");if(!p.match(n)){return j.messages.ZIP}return null},checkbox:function(q,o,r){var n=o.filter(":checked").length,p=Number(r[0]),m;if(2<=r.length){m=Number(r[1]);if(n<p||m<n){return k.format(j.messages.CHECKBOX_RANGE,p,m)}}else{if(n<p){return k.format(j.messages.CHECKBOX_MIN,p)}}},regexp:function(q,m,s){var r=k.getValue(m),o,n;if(!d.isArray(s)){s=[s]}try{if(typeof s[0]==="string"){o=new RegExp(s[0],s[1]?s[1]:f);n=s[2]}else{o=s[0];n=s[1]}if(!o.test(r)){return(n?n:j.messages.REGEXP_INVALID_VALUE)}}catch(p){return j.messages.REGEXP_INVALID_PARAM}return null}};var k={existsValue:function(m){var n;if(!m){n=false}else{if(m.attr("type")==="checkbox"){n=(0<m.filter(":checked").length)}else{n=!!k.getValue(m)}}return n},getValue:function(m){var n=m.attr("type"),o;if(n==="radio"){o=m.filter(":checked").val()}else{if(n!=="checkbox"){o=m.val()}else{o=[];m.filter(":checked").each(function(){o.push(d(this).val())})}}return o},pushErrors:function(m,n,o){if(typeof o==="string"&&o){m.push({name:n.name,d_name:n.d_name,message:o})}else{if(d.isArray(o)){d.each(o,function(q,p){m.push({name:n.name,d_name:n.d_name,message:p})})}}return m},_isHankaku:function(m){return !(/[^\x20-\x7E]/).test(m)},_isZenkaku:function(m){return !(/[\w\-\.]/).test(m)},_isTel:function(m){return !(/[^0-9\-\(\)]/).test(m)},_isInteger:function(m){var n=/^(-\d+|\d*)$/.test(""+m);return n&&!isNaN(m)},_isDate:function(o,n,m){if(o<1900||9999<o){return false}if(n<1||12<n){return false}if(m<1){return false}var p=[31,28,31,30,31,30,31,31,30,31,30,31];if((o%4===0&&o%100!==0)||o%400===0){p[1]=29}return !(p[n-1]<m)},_isTime:function(o,m,n){if(o<0||24<=o){return false}if(m<0||60<=m){return false}return !(n!==null&&(n<0||60<=n))},_isAllkana:function(n){for(var m=0;m<n.length;m++){if(n.charAt(m)<"ァ"||n.charAt(m)>"ヶ"){if(n.charAt(m)!=="ー"&&n.charAt(m)!==" "&&n.charAt(m)!=="　"){return false}}}return true},_isAllHiragana:function(n){for(var m=0;m<n.length;m++){if(n.charAt(m)<"ぁ"||n.charAt(m)>"ん"){if(n.charAt(m)!=="ー"&&n.charAt(m)!==" "&&n.charAt(m)!=="　"){return false}}}return true},_isEmailEx:function(y){var o=/^(.+)@(.+)$/,q='\\(\\)<>@,;:\\\\\\"\\.\\[\\]',n="[^\\s"+q+"]",z=/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/,w=n+"+",m=new RegExp("^"+w+"(\\."+w+")*$"),A=y.match(o);if(A===null){return j.messages.MAIL_NO_AT}var s=A[2];var v=s.match(z);if(v!==null){for(var t=1;t<=4;t++){if(v[t]>255){return j.messages.MAIL_INVALID_IP}}}var r=s.match(m);if(r===null){return j.messages.MAIL_NO_DOMAIN}var x=new RegExp(w,"g"),p=s.match(x),u=p.length;if(p[p.length-1].length<2||4<p[p.length-1].length){return j.messages.MAIL_INVALID_LOCALE}if(u<2){return j.messages.MAIL_INVALID_DMAIN}return""},format:function(){var m=Array.prototype.slice.call(arguments,0);var n=m.shift();d.each(m,function(o,p){n=n.replace(new RegExp("\\{"+o+"}","g"),p)});return n},join:function(n,o){if(o===f){o="\n"}var m=[];d.each(n,function(q,p){if(typeof p==="string"&&p){m.push(p)}else{m.push((p.d_name?p.d_name:p.name)+" : "+p.message)}});return m.join(o)}};if(h[l]){return h[l].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof l==="object"||!l){return h.init.apply(this,arguments)}else{d.error('Method "'+l+'" does not exist in '+c+" plugin!")}}};d.fn[c].defaults={result:null,submit:"validate",confirm_suffix:"_confirm",zip_suffix:"_after",ymd_suffix_y:"_y",ymd_suffix_m:"_m",ymd_suffix_d:"_d",fields:null,errorType:null,clearError:null,setError:null,focusError:true,focusErrorSpeed:"fast",messages:{VALIDATE_ERROR:"入力に誤りがあります.",REQUIRED:"必須項目です.",REQUIRED_PART:"{0} は必須項目です.",INSUFFICIENT:"不足しています.",INSUFFICIENT_PART:"{0} が不足しています.",CONFIRM:"確認{0}と異なっています.",CONFIRM_FIELD:"項目",NUMERICAL_VALUE:"数字を入力して下さい.",INTEGER:"整数値を入力して下さい.",INTEGER_PART:"{0} は整数値を入力して下さい.",MIN:"{0} ～ の数字を入力してください.",MAX:"～ {0} の数字を入力してください.",RANGE:"{0} ～ {1} の数字を入力してください.",MIN_LENGTH:"{0}文字以上で入力して下さい.",MAX_LENGTH:"{0}文字以下で入力して下さい.",NUM_LENGTH:"{0}桁の数字を入力してください.",CHECKBOX_MIN:"{0} 個チェックしてください.",CHECKBOX_RANGE:"{0}～{1} 個の間でチェックしてください.",ZENKAKU:"全角で入力してください.",HANKAKU:"半角で入力してください.",ZEN_KANA:"全角カタカナで入力してください.",TEL:"数字-()で入力してください.",ZIP:"[nnn-nnnn]書式で記述してください.",DATE:"[YYYY/MM/DD]書式で記述してください.",DATE_EX:"[YYYY/MM/DD] or [YYYY/MM] or [YYYY]書式で記述してください.",DATETIME:"[YYYY/MM/DD hh:mm:ss]書式で記述してください.",TIME:"[hh:mm:ss]書式で記述してください.",TIME_HM:"[hh:mm:ss]書式で記述してください.",DATE_INVALID:"日付が間違っています.",TIME_INVALID:"時間が間違っています.",DATE_PART_Y:"(年)",DATE_PART_M:"(月)",DATE_PART_D:"(日)",REGEXP_INVALID_PARAM:"正規表現が間違っています.",REGEXP_INVALID_VALUE:"書式が間違っています.",MAIL_NO_AT:"正しくありません(@).",MAIL_INVALID_IP:"正しくありません(IP).",MAIL_NO_DOMAIN:"ドメイン名がありません(DOMAIN).",MAIL_INVALID_LOCALE:"正しくありません(LOCALE).",MAIL_INVALID_DMAIN:"ドメイン名の書式が誤っています."}}})(jQuery,window,document);