!function(e,t){"use strict";const s="formValidate",r=s+".settings";e.fn[s]=function(n){let a;const i={init:function(t){return a=e.extend({},e.fn[s].defaults,t),this.each((function(){const t=e(this);t.data(r,a),e.each(["submit"],(function(){const e=a[this];"string"==typeof e?t.on(this+"."+s,(function(){return t[s](e)})):"function"==typeof e&&t.on(this+"."+s,e)}))}))},destroy:function(){return this.each((function(){const t=e(this);e.each(["submit"],(function(){t.off(this+"."+s)}))}))},dispError:function(t){const s=e(this).data(r),n=this;e.each(t,(function(e,t){i.setError.apply(n,[t.name,t.message])})),t.length&&s.focusError>0&&i.focusError.apply(this,[t[0].name])},focusError:function(s){const n=e(this).data(r),a=e(this).find("*[name='"+s+"']");let i=0;0!==a.length?(e(a).trigger("focus"),i=e(a).offset().top-e(t).innerHeight()/2,i<0&&(i=0)):console.warn(l.format(n.messages.NOT_EXISTS_FIELD,s)),void 0!==e.fn.animate?e("html,body").animate({scrollTop:i},n.focusErrorSpeed):e("html,body").scrollTop(i)},clearError:function(t){const s=e(this).data(r);return"function"==typeof s.clearError?s.clearError.apply(this,[t]):"bs3"===s.errorType?i.clearErrorBootstrap3.apply(this,[t]):"tb2"===s.errorType?i.clearErrorTb2.apply(this,[t]):i.clearErrorBootstrap.apply(this,[t]),this},setError:function(t,s){const n=e(this).data(r);return"function"==typeof n.setError?n.setError.apply(this,[t,s]):"bs3"===n.errorType?i.setErrorBootstrap3.apply(this,[t,s]):"tb2"===n.errorType?i.setErrorTb2.apply(this,[t,s]):i.setErrorBootstrap.apply(this,[t,s]),this},clearErrorBootstrap:function(t){if(t){const s=e(this).find("*[name='"+t+"']");e(s).removeClass("is-invalid").nextAll(".invalid-feedback").remove()}else e(this).find(".is-invalid").removeClass("is-invalid").nextAll(".invalid-feedback").remove();return this},setErrorBootstrap:function(t,s){const r=e(this).find("*[name='"+t+"']"),n='<div class="invalid-feedback">'+s+"</div>";if(-1===["radio","checkbox"].indexOf(r.attr("type")))e(r).addClass("is-invalid"),e(r).parent().hasClass("input-group")?e(r).parent().append(n):e(r).filter(":last").after(n);else{const t=e(r).addClass("is-invalid").closest(".form-check").addClass("is-invalid");e(t).filter(":last").after(n)}return this},clearErrorBootstrap3:function(t){if(t){const s=e(this).find("*[name='"+t+"']");e(s).closest(".form-group").removeClass("has-error").find(".errorMessage").remove()}else e(this).find(".form-group").removeClass("has-error").find(".errorMessage").remove();return this},setErrorBootstrap3:function(t,s){const r=e(this).find("*[name='"+t+"']"),n='<span class="help-block errorMessage">'+s+"</span>";if(e(r).closest(".form-group").addClass("has-error"),-1===["radio","checkbox"].indexOf(r.attr("type"))){const t=e(r).closest(".input-group");0!==e(t).length?e(t).after(n):e(r).filter(":last").after(n)}else e(r).filter(":last").parent().after(n);return this},clearErrorTb2:function(t){if(t){const s=e(this).find("*[name='"+t+"']");e(s).closest(".control-group").removeClass("error").find(".errorMessage").remove()}else e(this).find(".control-group").removeClass("error").find(".errorMessage").remove();return this},setErrorTb2:function(t,s){const r=e(this).find("*[name='"+t+"']");return e(r).closest(".control-group").addClass("error"),e(r).closest(".controls").append('<div class="help-block errorMessage">'+s+"</div>"),this},validate:function(t){a=e.extend(e(this).data(r),t),i.clearError.apply(this);let s=!0;const n=i.getValidateResult.apply(this,[a]);return n.length>0&&(i.dispError.apply(this,[n]),s=!1),"function"==typeof a.result&&(s=a.result.apply(this,[s,n])),s},validate_alert:function(s){a=e.extend(e(this).data(r),s);let n=!0;const o=i.getValidateResult.apply(this,[a]);return o.length>0&&(t.alert(a.messages.VALIDATE_ERROR+"\n"+l.join(o)),a.focusError&&i.focusError.apply(this,[o[0].name]),n=!1),"function"==typeof a.result&&(n=a.result.apply(this,[n,o])),n},getValidateResult:function(t){const s=this;a=e.extend(e(this).data(r),t);let n=[];const c=a.fields||i.getFieldsRules.apply(this,[a]);return Array.isArray(c)?(e.each(c,(function(t,r){if(!r.rules)return!0;let i=r.rules;Array.isArray(i)||(i=[i]);const c=e(s).find("*[name='"+r.name+"']"),f=l.existsValue(c);return e.each(i,(function(e,t){const i=[];let m,g;if(Array.isArray(t)){if(0===t.length)return;2===t.length?(g=t[1],Array.isArray(g)||(g=[g])):t.length>=3&&(g=t.slice(1)),t=t[0]}else if("object"==typeof t){if(!t.rule)return;t.params&&(g=t.params,Array.isArray(g)||(g=[g])),t=t.rule}else if("string"==typeof t)if(g=t.split(":",2),g[0]&&(t=g[0]),g[1]){try{g=JSON.parse(g[1])}catch(e){g=g[1].split(",")}Array.isArray(g)||(g=[g])}else g=[];"function"==typeof t?(m=t.apply(s,[r,c,g,a]),l.pushErrors(i,r,m)):"string"==typeof t&&(f?u[t]&&(m=u[t].apply(s,[r,c,g,a]),l.pushErrors(i,r,m)):"required"===t?l.pushErrors(i,r,a.messages.REQUIRED):"checkbox"===t?(m=u[t].apply(s,[r,c,g,a]),l.pushErrors(i,r,m)):o[t]&&(m=o[t].apply(s,[r,c,g,a]),l.pushErrors(i,r,m))),i&&i.length>0&&(n=n.concat(i))})),!0})),n):n},getFieldsRules:function(){const t=[],s=e(this).get(0).elements;return Array.from(s).forEach((function(e){const s=e.name;if(!s)return;const r=e.getAttribute("type");if(("radio"===r||"checkbox"===r)&&t.find((t=>t.name===e.name)))return;const n=[];let a;switch(e.required&&n.push("required"),[["minLength","minlength"],["maxLength","maxlength"],"min","max",["pattern","regexp"]].forEach((function(t){let s;Array.isArray(t)?(s=t[1],t=t[0]):s=t;const r=e.getAttribute(t);null!==r&&n.push([s,r])})),r){case"date":case"email":case"tel":a=r;break;case"number":a="numeric";break;case"time":a=["time","hm"]}a&&n.push(a),t.push({name:s,rules:n})})),t}},o={numeric:function(e,t){return t[0]&&t[0].validity&&t[0].validity.badInput?t[0].validationMessage:null},number:function(e,t){return o.numeric.apply(this,[e,t])},zip_ex:function(t,s,r,n){const a=e(this).find("*[name='"+t.name+n.zip_suffix+"']");return!s||!l.getValue(s)||a&&a.val()?null:n.messages.INSUFFICIENT},ymd:function(t,s,r){const n=[];let i=null,o=null,u=null,c=!1,f=!1,m=!1;const g=e(this).find("*[name='"+t.name+a.ymd_suffix_y+"']"),h=e(this).find("*[name='"+t.name+a.ymd_suffix_m+"']"),E=e(this).find("*[name='"+t.name+a.ymd_suffix_d+"']");return g&&""!==g.val()&&(c=!0,i=g.val()),h&&""!==h.val()&&(f=!0,o=h.val()),E&&""!==E.val()&&(m=!0,u=E.val()),"required"===r[0]?(c||n.push(l.format(a.messages.REQUIRED_PART,a.messages.DATE_PART_Y)),f||n.push(l.format(a.messages.REQUIRED_PART,a.messages.DATE_PART_M)),m||n.push(l.format(a.messages.REQUIRED_PART,a.messages.DATE_PART_D))):!(c||f||m)||c&&f&&m||(c||n.push(l.format(a.messages.INSUFFICIENT_PART,a.messages.DATE_PART_Y)),f||n.push(l.format(a.messages.INSUFFICIENT_PART,a.messages.DATE_PART_M)),m||n.push(l.format(a.messages.INSUFFICIENT_PART,a.messages.DATE_PART_D))),c&&!l._isInteger(i)&&n.push(l.format(a.messages.INTEGER_PART,a.messages.DATE_PART_Y)),f&&!l._isInteger(o)&&n.push(l.format(a.messages.INTEGER_PART,a.messages.DATE_PART_M)),m&&!l._isInteger(u)&&n.push(l.format(a.messages.INTEGER_PART,a.messages.DATE_PART_D)),0!==n.length||l._isDate(i,o,u)||n.push(l.format(a.messages.DATE_INVALID)),n}},u={confirm:function(t,s){const r=e(this).find("*[name='"+t.name+a.confirm_suffix+"']");return s&&r&&l.getValue(s)===r.val()?null:l.format(a.messages.CONFIRM,t.d_name?t.d_name:a.messages.CONFIRM_FIELD)},email:function(e,t){const s=l.getValue(t);if(s){const e=l._isEmailEx(s);if(""!==e)return e}return null},zenkaku:function(e,t){return l._isZenkaku(l.getValue(t))?null:a.messages.ZENKAKU},hankaku:function(e,t){return l._isHankaku(l.getValue(t))?null:a.messages.HANKAKU},zen_katakana:function(e,t){return l._isAllKana(l.getValue(t))?null:a.messages.ZEN_KANA},hiragana:function(e,t){return l._isAllHiragana(l.getValue(t))?null:a.messages.HIRAGANA},tel:function(e,t){return l._isTel(l.getValue(t))?null:a.messages.TEL},minlength:function(e,t,s){const r=Number(s[0]);return l.getValue(t).length<r?l.format(a.messages.MIN_LENGTH,r):null},maxlength:function(e,t,s){const r=Number(s[0]);return r<l.getValue(t).length?l.format(a.messages.MAX_LENGTH,r):null},numeric:function(e,t){const s=l.getValue(t);return isFinite(s)&&-1===s.indexOf(" ")&&-1===s.indexOf("0x")?null:a.messages.NUMERICAL_VALUE},number:function(e,t){return u.numeric.apply(this,[e,t])},numlength:function(e,t,s){const r=l.getValue(t);let n=s[0],i=s[0];return s[1]&&(n+=","+s[1],i+="～"+s[1]),new RegExp("^\\d{"+n+"}$").test(r)?null:l.format(a.messages.NUM_LENGTH,i)},min:function(e,t,s){const r=l.getValue(t);if(!l._isInteger(r))return a.messages.INTEGER;const n=Number(s[0]);return r<n?l.format(a.messages.MIN,n):null},max:function(e,t,s){const r=l.getValue(t);if(!l._isInteger(r))return a.messages.INTEGER;const n=Number(s[0]);return n<r?l.format(a.messages.MIN,n):null},range:function(e,t,s){const r=l.getValue(t);if(!l._isInteger(r))return a.messages.INTEGER;const n=Number(s[0]),i=Number(s[1]);return r<n||i<r?l.format(a.messages.RANGE,n,i):null},date:function(e,t){return l.getValue(t).match(/^((\d{1,4})[/-](\d{1,2})[/-](\d{1,2}))$/g)?l._isDate(RegExp.$2,RegExp.$3,RegExp.$4)?null:a.messages.DATE_INVALID:a.messages.DATE},datetime:function(e,t){return l.getValue(t).match(/^((\d{1,4})[/-](\d{1,2})[/-](\d{1,2}))( ((\d{1,2}):(\d{1,2})(:(\d{1,2}))?))?$/g)?l._isDate(RegExp.$2,RegExp.$3,RegExp.$4)?RegExp.$6&&!l._isTime(RegExp.$7,RegExp.$8,RegExp.$10)?a.messages.TIME_INVALID:null:a.messages.DATE_INVALID:a.messages.DATETIME},date_ex:function(e,t){if(!l.getValue(t).match(/^(\d{1,4})([/-](\d{1,2})([/-](\d{1,2}))?)?$/))return a.messages.DATE_EX;const s=RegExp.$1,r=RegExp.$3?RegExp.$3:1,n=RegExp.$5?RegExp.$5:1;return l._isDate(s,r,n)?null:a.messages.DATE_INVALID},time:function(e,t,s){const r=l.getValue(t);if("hm"===s[0]){if(!r.match(/^(\d{1,2}):(\d{1,2})$/g))return a.messages.TIME_HM;if(!l._isTime(RegExp.$1,RegExp.$2,0))return a.messages.TIME_INVALID}else{if(!r.match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/g))return a.messages.TIME;if(!l._isTime(RegExp.$1,RegExp.$2,RegExp.$3))return a.messages.TIME_INVALID}return null},zip:function(e,t){return l.getValue(t).match(/^\d{1,3}-\d{1,4}$/g)?null:a.messages.ZIP},checkbox:function(e,t,s){const r=t.filter(":checked").length,n=Number(s[0]);if(s.length>=2){const e=Number(s[1]);if(r<n||e<r)return l.format(a.messages.CHECKBOX_RANGE,n,e)}else if(r<n)return l.format(a.messages.CHECKBOX_MIN,n)},regexp:function(e,t,s){const r=l.getValue(t);let n,i;Array.isArray(s)||(s=[s]);try{if("string"==typeof s[0]?(n=new RegExp(s[0],s[1]?s[1]:void 0),i=s[2]):(n=s[0],i=s[1]),!n.test(r))return i||a.messages.REGEXP_INVALID_VALUE}catch(e){return a.messages.REGEXP_INVALID_PARAM}return null}},l={existsValue:function(e){let t;return t=!!e&&("checkbox"===e.attr("type")?e.filter(":checked").length>0:!!l.getValue(e)),t},getValue:function(t){const s=t.attr("type");let r;return"radio"===s?r=t.filter(":checked").val():"checkbox"!==s?r=t.val():(r=[],t.filter(":checked").each((function(){r.push(e(this).val())}))),r},pushErrors:function(t,s,r){return"string"==typeof r&&r?t.push({name:s.name,d_name:s.d_name,message:r}):Array.isArray(r)&&e.each(r,(function(e,r){t.push({name:s.name,d_name:s.d_name,message:r})})),t},_isHankaku:function(e){return!/[^\x20-\x7E]/.test(e)},_isZenkaku:function(e){return!/[\w\-.]/.test(e)},_isTel:function(e){return!/[^0-9-()]/.test(e)},_isInteger:function(e){return/^(-\d+|\d*)$/.test(""+e)&&!isNaN(e)},_isDate:function(e,t,s){if(e<1900||e>9999)return!1;if(t<1||t>12)return!1;if(s<1)return!1;const r=[31,28,31,30,31,30,31,31,30,31,30,31];return(e%4==0&&e%100!=0||e%400==0)&&(r[1]=29),!(r[t-1]<s)},_isTime:function(e,t,s){return!(e<0||e>=24||t<0||t>=60||null!==s&&(s<0||s>=60))},_isAllKana:function(e){for(let t=0;t<e.length;t++)if((e.charAt(t)<"ァ"||e.charAt(t)>"ヶ")&&"ー"!==e.charAt(t)&&" "!==e.charAt(t)&&"　"!==e.charAt(t))return!1;return!0},_isAllHiragana:function(e){for(let t=0;t<e.length;t++)if((e.charAt(t)<"ぁ"||e.charAt(t)>"ん")&&"ー"!==e.charAt(t)&&" "!==e.charAt(t)&&"　"!==e.charAt(t))return!1;return!0},_isEmailEx:function(e){const t='[^\\s\\(\\)<>@,;:\\\\"\\.\\[\\]]+',s=new RegExp("^"+t+"(\\."+t+")*$"),r=e.match(/^(.+)@(.+)$/);if(null===r)return a.messages.MAIL_NO_AT;const n=r[2],i=n.match(/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})]$/);if(null!==i)for(let e=1;e<=4;e++)if(i[e]>255)return a.messages.MAIL_INVALID_IP;if(null===n.match(s))return a.messages.MAIL_NO_DOMAIN;const o=new RegExp(t,"g"),u=n.match(o),l=u.length;return u[u.length-1].length<2||u[u.length-1].length>4?a.messages.MAIL_INVALID_LOCALE:l<2?a.messages.MAIL_INVALID_DOMAIN:""},format:function(){const t=Array.prototype.slice.call(arguments,0);let s=t.shift();return e.each(t,(function(e,t){s=s.replace(new RegExp("\\{"+e+"}","g"),t)})),s},join:function(t,s){void 0===s&&(s="\n");const r=[];return e.each(t,(function(e,t){"string"==typeof t&&t?r.push(t):r.push((t.d_name?t.d_name:t.name)+" : "+t.message)})),r.join(s)}};return i[n]?i[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error('Method "'+n+'" does not exist in '+s+" plugin!"):i.init.apply(this,arguments)},e.fn[s].defaults={submit:"validate",confirm_suffix:"_confirm",zip_suffix:"_after",ymd_suffix_y:"_y",ymd_suffix_m:"_m",ymd_suffix_d:"_d",fields:null,errorType:null,clearError:null,setError:null,focusError:!0,focusErrorSpeed:"fast",messages:{VALIDATE_ERROR:"入力に誤りがあります.",REQUIRED:"必須項目です.",REQUIRED_PART:"{0} は必須項目です.",INSUFFICIENT:"不足しています.",INSUFFICIENT_PART:"{0} が不足しています.",CONFIRM:"確認{0}と異なっています.",CONFIRM_FIELD:"項目",NUMERICAL_VALUE:"数値を入力して下さい.",INTEGER:"整数値を入力して下さい.",INTEGER_PART:"{0} は整数値を入力して下さい.",MIN:"{0} ～ の数値を入力してください.",MAX:"～ {0} の数値を入力してください.",RANGE:"{0} ～ {1} の数値を入力してください.",MIN_LENGTH:"{0}文字以上で入力して下さい.",MAX_LENGTH:"{0}文字以下で入力して下さい.",NUM_LENGTH:"{0}桁の数値を入力してください.",CHECKBOX_MIN:"{0} 個チェックしてください.",CHECKBOX_RANGE:"{0}～{1} 個の間でチェックしてください.",ZENKAKU:"全角で入力してください.",HANKAKU:"半角で入力してください.",ZEN_KANA:"全角カタカナで入力してください.",HIRAGANA:"ひらがなで入力してください.",TEL:"数値-()で入力してください.",ZIP:"[nnn-nnnn]書式で記述してください.",DATE:"[YYYY/MM/DD]書式で記述してください.",DATE_EX:"[YYYY/MM/DD] or [YYYY/MM] or [YYYY]書式で記述してください.",DATETIME:"[YYYY/MM/DD hh:mm:ss]書式で記述してください.",TIME:"[hh:mm:ss]書式で記述してください.",TIME_HM:"[hh:mm:ss]書式で記述してください.",DATE_INVALID:"日付が間違っています.",TIME_INVALID:"時間が間違っています.",DATE_PART_Y:"(年)",DATE_PART_M:"(月)",DATE_PART_D:"(日)",REGEXP_INVALID_PARAM:"正規表現が間違っています.",REGEXP_INVALID_VALUE:"書式が間違っています.",MAIL_NO_AT:"正しくありません(@).",MAIL_INVALID_IP:"正しくありません(IP).",MAIL_NO_DOMAIN:"ドメイン名がありません(DOMAIN).",MAIL_INVALID_LOCALE:"正しくありません(LOCALE).",MAIL_INVALID_DOMAIN:"ドメイン名の書式が誤っています.",NOT_EXISTS_FIELD:"フィールド名[{0}]が存在しません."}}}(window.jQuery,window,document);
//# sourceMappingURL=jquery.btfw.form_validate.min.js.map