(function(e,c,a,g){var d="formValidate",f={result:null,submit:"validate",confirm_suffix:"_confirm",zip_suffix:"_after",ymd_suffix_y:"_y",ymd_suffix_m:"_m",ymd_suffix_d:"_d",fields:null,errorType:null,clearError:null,setError:null,focusError:true,focusErrorSpeed:"fast"},b={VALIDATE_ERROR:"入力に誤りがあります.",REQUIRED:"必須項目です.",REQUIRED_PART:"{0} は必須項目です.",INSUFFICIENT:"不足しています.",INSUFFICIENT_PART:"{0} が不足しています.",CONFIRM:"確認{0}と異なっています.",CONFIRM_FIELD:"項目",NUMERICAL_VALUE:"数字を入力して下さい.",INTEGER:"整数値を入力して下さい.",INTEGER_PART:"{0} は整数値を入力して下さい.",MIN:"{0} ～ の数字を入力してください.",MAX:"～ {0} の数字を入力してください.",RANGE:"{0} ～ {1} の数字を入力してください.",MIN_LENGTH:"{0}文字以上で入力して下さい.",MAX_LENGTH:"{0}文字以下で入力して下さい.",NUM_LENGTH:"{0}桁の数字を入力してください.",CHECKBOX_MIN:"{0} 個チェックしてください.",CHECKBOX_RANGE:"{0}～{1} 個の間でチェックしてください.",ZENKAKU:"全角で入力してください.",HANKAKU:"半角で入力してください.",ZEN_KANA:"全角カタカナで入力してください.",TEL:"数字-()で入力してください.",ZIP:"[nnn-nnnn]書式で記述してください.",DATE:"[YYYY/MM/DD]書式で記述してください.",DATE_EX:"[YYYY/MM/DD] or [YYYY/MM] or [YYYY]書式で記述してください.",DATETIME:"[YYYY/MM/DD hh:mm:ss]書式で記述してください.",TIME:"[hh:mm:ss]書式で記述してください.",TIME_HM:"[hh:mm:ss]書式で記述してください.",DATE_INVALID:"日付が間違っています.",TIME_INVALID:"時間が間違っています.",DATE_PART_Y:"(年)",DATE_PART_M:"(月)",DATE_PART_D:"(日)",REGEXP_INVALID_PARAM:"正規表現が間違っています.",REGEXP_INVALID_VALUE:"書式が間違っています.",MAIL_NO_AT:"正しくありません(@).",MAIL_INVALID_IP:"正しくありません(IP).",MAIL_NO_DOMAIN:"ドメイン名がありません(DOMAIN).",MAIL_INVALID_LOCALE:"正しくありません(LOCALE).",MAIL_INVALID_DMAIN:"ドメイン名の書式が誤っています."};e.fn[d]=function(l){var i={init:function(m){var n=e.extend({},f,m);return this.each(function(){var o=e(this);o.data(d+".settings",n);var p=["submit"];e.each(p,function(){var q=n[this];if(typeof q==="string"){o.on(this+"."+d,function(){return o[d](q)})}else{if(e.isFunction(q)){o.on(this+"."+d,q)}}})})},destroy:function(){return this.each(function(){var m=e(this);var n=["submit"];e.each(n,function(){m.off(this+"."+d)})})},dispError:function(m){var o=e(this).data(d+".settings");var n=this;e.each(m,function(q,p){i.setError.apply(n,[p.name,p.message])});if(0<m.length&&o.focusError){i.focusError.apply(this,[m[0].name])}},focusError:function(m){var n=e(this).data(d+".settings");var q=e(this).find("*[name='"+m+"']");e(q).focus();var o=e(q).offset().top-e(c).innerHeight()/2;if(o<0){o=0}e("html,body").animate({scrollTop:o},n.focusErrorSpeed)},clearError:function(m){var n=e(this).data(d+".settings");if(e.isFunction(n.clearError)){n.clearError.apply(this,[m])}else{if(n.errorType==="tb2"){i.clearErrorTb2.apply(this,[m])}else{i.clearErrorBootstrap.apply(this,[m])}}return this},setError:function(m,o){var n=e(this).data(d+".settings");if(e.isFunction(n.setError)){n.setError.apply(this,[m,o])}else{if(n.errorType==="tb2"){i.setErrorTb2.apply(this,[m,o])}else{i.setErrorBootstrap.apply(this,[m,o])}}return this},clearErrorBootstrap:function(m){if(m){var n=e(this).find("*[name='"+m+"']");e(n).closest(".form-group").removeClass("has-error").find(".error_message").remove()}else{e(this).find(".form-group").removeClass("has-error").find(".error_message").remove()}return this},setErrorBootstrap:function(n,p){var q=e(this).find("*[name='"+n+"']");var o='<span class="help-block error_message">'+p+"</span>";e(q).closest(".form-group").addClass("has-error");if(q.attr("type")!=="radio"&&q.attr("type")!=="checkbox"){var m=e(q).closest(".input-group");if(e(m).length!==0){e(m).after(o)}else{e(q).filter(":last").after(o)}}else{e(q).filter(":last").parent().after(o)}return this},clearErrorTb2:function(m){if(m){var n=e(this).find("*[name='"+m+"']");e(n).closest(".control-group").removeClass("error").find(".error_message").remove()}else{e(this).find(".control-group").removeClass("error").find(".error_message").remove()}return this},setErrorTb2:function(m,n){var o=e(this).find("*[name='"+m+"']");e(o).closest(".control-group").addClass("error");e(o).closest(".controls").append('<div class="help-block error_message">'+n+"</div>");return this},validate:function(o){var p=e.extend(e(this).data(d+".settings"),o);i.clearError.apply(this);var n=true;var m=i.getValidateResult.apply(this,[p]);if(0<m.length){i.dispError.apply(this,[m]);n=false}if(e.isFunction(p.result)){n=p.result.apply(this,[n,m])}return n},validate_alert:function(o){var p=e.extend(e(this).data(d+".settings"),o);var n=true;var m=i.getValidateResult.apply(this,[p]);if(0<m.length){alert(b.VALIDATE_ERROR+"\n"+k.join(m));if(p.focusError){i.focusError.apply(this,[m[0].name])}n=false}if(e.isFunction(p.result)){n=p.result.apply(this,[n,m])}return n},getValidateResult:function(o){var q=this;var p=e.extend(e(this).data(d+".settings"),o);var n=[];var m=p.fields;if(!e.isArray(m)){return n}e.each(m,function(t,v){if(!v.rules){return true}var r=v.rules;if(!e.isArray(r)){r=[r]}var s=e(q).find("*[name='"+v.name+"']");var u=k.existsValue(s);e.each(r,function(x,z){var w=[];var B;var A;if(e.isArray(z)){if(!z[0]){return}if(z[1]){A=z[1];if(!e.isArray(A)){A=[A]}}z=z[0]}else{if(typeof z==="object"){if(!z.rule){return}if(z.params){A=z.params;if(!e.isArray(A)){A=[A]}}z=z.rule}else{if(typeof z==="string"){A=z.split(":",2);if(A[0]){z=A[0]}if(A[1]){try{A=JSON.parse(A[1])}catch(y){A=A[1].split(",")}if(!e.isArray(A)){A=[A]}}else{A=[]}}}}if(e.isFunction(z)){B=z.apply(q,[v,s,A,p]);k.pushErrors(w,v,B)}else{if(typeof z==="string"){if(u){if(h[z]){B=h[z].apply(q,[v,s,A,p]);k.pushErrors(w,v,B)}else{}}else{if(z==="required"){k.pushErrors(w,v,b.REQUIRED)}else{if(j[z]){B=j[z].apply(q,[v,s,A,p]);k.pushErrors(w,v,B)}else{}}}}}if(w&&0<w.length){n=n.concat(w)}});return true});return n}};var j={zip_ex:function(p,n,q,o){var m=e(this).find("*[name='"+p.name+o.zip_suffix+"']");if(n&&k.getValue(n)&&(!m||!m.val())){return b.INSUFFICIENT}return null},ymd:function(y,n,q,p){var o=[];var w=null,v=null,x=null;var t=false,z=false,r=false;var u=e(this).find("*[name='"+y.name+p.ymd_suffix_y+"']");var m=e(this).find("*[name='"+y.name+p.ymd_suffix_m+"']");var s=e(this).find("*[name='"+y.name+p.ymd_suffix_d+"']");if(u&&u.val()!==""){t=true;w=u.val()}if(m&&m.val()!==""){z=true;v=m.val()}if(s&&s.val()!==""){r=true;x=s.val()}if(q[0]==="required"){if(!t){o.push(k.format(b.REQUIRED_PART,b.DATE_PART_Y))}if(!z){o.push(k.format(b.REQUIRED_PART,b.DATE_PART_M))}if(!r){o.push(k.format(b.REQUIRED_PART,b.DATE_PART_D))}}else{if((t||z||r)&&!(t&&z&&r)){if(!t){o.push(k.format(b.INSUFFICIENT_PART,b.DATE_PART_Y))}if(!z){o.push(k.format(b.INSUFFICIENT_PART,b.DATE_PART_M))}if(!r){o.push(k.format(b.INSUFFICIENT_PART,b.DATE_PART_D))}}}if(!k._isInteger(w)){o.push(k.format(b.INTEGER_PART,b.DATE_PART_Y))}if(!k._isInteger(v)){o.push(k.format(b.INTEGER_PART,b.DATE_PART_M))}if(!k._isInteger(x)){o.push(k.format(b.INTEGER_PART,b.DATE_PART_D))}if(o.length===0&&!k._isDate(w,v,x)){o.push(k.format(b.DATE_INVALID))}return o}};var h={confirm:function(p,m,q,o){var n=e(this).find("*[name='"+p.name+o.confirm_suffix+"']");if(!m||!n||k.getValue(m)!==n.val()){return k.format(b.CONFIRM,(p.d_name?p.d_name:b.CONFIRM_FIELD))}return null},email:function(o,m){var p=k.getValue(m);if(p){var n=k._isEmailEx(p);if(n!==""){return n}}return null},zenkaku:function(n,m){if(!k._isZenkaku(k.getValue(m))){return b.ZENKAKU}return null},hankaku:function(n,m){if(!k._isHankaku(k.getValue(m))){return b.HANKAKU}return null},zen_katakana:function(n,m){if(!k._isAllkana(k.getValue(m))){return b.ZEN_KANA}return null},hiragana:function(n,m){if(!k._isAllHiragana(k.getValue(m))){return b.HIRAGANA}return null},tel:function(n,m){if(!k._isTel(k.getValue(m))){return b.TEL}return null},minlength:function(o,m,p){var n=Number(p[0]);if(k.getValue(m).length<n){return k.format(b.MIN_LENGTH,n)}return null},maxlength:function(o,n,p){var m=Number(p[0]);if(m<k.getValue(n).length){return k.format(b.MAX_LENGTH,m)}return null},number:function(o,m,q,n){var p=k.getValue(m);if(!e.isNumeric(p)||(p.indexOf(" ")!==-1)){return b.NUMERICAL_VALUE}return null},numlength:function(p,n,r){var q=k.getValue(n);var s=r[0];var m=r[0];if(r[1]){s+=","+r[1];m+="～"+r[1]}var o=new RegExp("^\\d{"+s+"}$");if(!o.test(q)){return k.format(b.NUM_LENGTH,m)}return null},min:function(o,m,q){var p=k.getValue(m);if(!k._isInteger(p)){return b.INTEGER}var n=Number(q[0]);if(p<n){return k.format(b.MIN,n)}return null},max:function(o,n,q){var p=k.getValue(n);if(!k._isInteger(p)){return b.INTEGER}var m=Number(q[0]);if(m<p){return k.format(b.MIN,m)}return null},range:function(p,n,r){var q=k.getValue(n);if(!k._isInteger(q)){return b.INTEGER}var o=Number(r[0]);var m=Number(r[1]);if(q<o||m<q){return k.format(b.RANGE,o,m)}return null},date:function(o,m){var p=k.getValue(m);var n=new RegExp("^((\\d{1,4})[/-](\\d{1,2})[/-](\\d{1,2}))$","g");if(!p.match(n)){return b.DATE}if(!k._isDate(RegExp.$2,RegExp.$3,RegExp.$4)){return b.DATE_INVALID}return null},datetime:function(o,m){var p=k.getValue(m);var n=new RegExp("^((\\d{1,4})[/-](\\d{1,2})[/-](\\d{1,2}))( ((\\d{1,2}):(\\d{1,2})(:(\\d{1,2}))?))?$","g");if(!p.match(n)){return b.DATETIME}if(!k._isDate(RegExp.$2,RegExp.$3,RegExp.$4)){return b.DATE_INVALID}if(RegExp.$6&&!k._isTime(RegExp.$7,RegExp.$8,RegExp.$10)){return b.TIME_INVALID}return null},date_ex:function(q,o){var s=k.getValue(o);var p=new RegExp("^(\\d{1,4})([/-](\\d{1,2})([/-](\\d{1,2}))?)?$");if(!s.match(p)){return b.DATE_EX}var t=RegExp.$1;var n=RegExp.$3?RegExp.$3:1;var r=RegExp.$5?RegExp.$5:1;if(!k._isDate(t,n,r)){return b.DATE_INVALID}return null},time:function(o,m,q){var p=k.getValue(m);var n;if(q[0]==="hm"){n=new RegExp("^(\\d{1,2}):(\\d{1,2})$","g");if(!p.match(n)){return b.TIME_HM}if(!k._isTime(RegExp.$1,RegExp.$2,0)){return b.TIME_INVALID}}else{n=new RegExp("^(\\d{1,2}):(\\d{1,2}):(\\d{1,2})$","g");if(!p.match(n)){return b.TIME}if(!k._isTime(RegExp.$1,RegExp.$2,RegExp.$3)){return b.TIME_INVALID}}return null},zip:function(o,m){var p=k.getValue(m);var n=new RegExp("^\\d{1,3}-\\d{1,4}$","g");if(!p.match(n)){return b.ZIP}return null},checkbox:function(q,o,r){var n=o.filter(":checked").length;var p=Number(r[0]);var m;if(2<=r.length){m=Number(r[1]);if(n<p||m<n){return k.format(b.CHECKBOX_RANGE,p,m)}}else{if(n<p){return k.format(b.CHECKBOX_MIN,p)}}},regexp:function(q,m,s){var r=k.getValue(m);if(!e.isArray(s)){s=[s]}var o,n;try{if(typeof s[0]==="string"){o=new RegExp(s[0],s[1]?s[1]:g);n=s[2]}else{o=s[0];n=s[1]}if(!o.test(r)){return(n?n:b.REGEXP_INVALID_VALUE)}}catch(p){return b.REGEXP_INVALID_PARAM}return null}};var k={existsValue:function(m){var n;if(!m){n=false}else{if(m.attr("type")==="checkbox"){n=(0<m.filter(":checked").length)}else{n=!!k.getValue(m)}}return n},getValue:function(m){var n=m.attr("type");var o;if(n==="radio"){o=m.filter(":checked").val()}else{if(n!=="checkbox"){o=m.val()}else{o=[];m.filter(":checked").each(function(){o.push(e(this).val())})}}return o},pushErrors:function(m,n,o){if(typeof o==="string"&&o){m.push({name:n.name,d_name:n.d_name,message:o})}else{if(e.isArray(o)){e.each(o,function(q,p){m.push({name:n.name,d_name:n.d_name,message:p})})}}return m},_isHankaku:function(m){return !(/[^\x20-\x7E]/).test(m)},_isZenkaku:function(m){return !(/[\w\-\.]/).test(m)},_isTel:function(m){return !(/[^0-9\-\(\)]/).test(m)},_isInteger:function(m){var n=/^(-\d+|\d*)$/.test(""+m);return n&&!isNaN(m)},_isDate:function(o,n,m){if(o<1900||9999<o){return false}if(n<1||12<n){return false}if(m<1){return false}var p=[31,28,31,30,31,30,31,31,30,31,30,31];if((o%4===0&&o%100!==0)||o%400===0){p[1]=29}return !(p[n-1]<m)},_isTime:function(o,m,n){if(o<0||24<=o){return false}if(m<0||60<=m){return false}return !(n!==null&&(n<0||60<=n))},_isAllkana:function(n){for(var m=0;m<n.length;m++){if(n.charAt(m)<"ァ"||n.charAt(m)>"ヶ"){if(n.charAt(m)!=="ー"&&n.charAt(m)!==" "&&n.charAt(m)!=="　"){return false}}}return true},_isAllHiragana:function(n){for(var m=0;m<n.length;m++){if(n.charAt(m)<"ぁ"||n.charAt(m)>"ん"){if(n.charAt(m)!=="ー"&&n.charAt(m)!==" "&&n.charAt(m)!=="　"){return false}}}return true},_isEmailEx:function(y){var o=/^(.+)@(.+)$/;var q='\\(\\)<>@,;:\\\\\\"\\.\\[\\]';var n="[^\\s"+q+"]";var z=/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/;var w=n+"+";var m=new RegExp("^"+w+"(\\."+w+")*$");var A=y.match(o);if(A===null){return b.MAIL_NO_AT}var s=A[2];var v=s.match(z);if(v!==null){for(var t=1;t<=4;t++){if(v[t]>255){return b.MAIL_INVALID_IP}}}var r=s.match(m);if(r===null){return b.MAIL_NO_DOMAIN}var x=new RegExp(w,"g");var p=s.match(x);var u=p.length;if(p[p.length-1].length<2||4<p[p.length-1].length){return b.MAIL_INVALID_LOCALE}if(u<2){return b.MAIL_INVALID_DMAIN}return""},format:function(){var m=Array.prototype.slice.call(arguments,0);var n=m.shift();e.each(m,function(o,p){n=n.replace(new RegExp("\\{"+o+"}","g"),p)});return n},join:function(n,o){if(o===g){o="\n"}var m=[];e.each(n,function(q,p){if(typeof p==="string"&&p){m.push(p)}else{m.push((p.d_name?p.d_name:p.name)+" : "+p.message)}});return m.join(o)}};if(i[l]){return i[l].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof l==="object"||!l){return i.init.apply(this,arguments)}else{e.error('Method "'+l+'" does not exist in '+d+" plugin!")}}}})(jQuery,window,document);